schema: '2.0'
stages:
  positional_encoding:
    cmd: python src/features/positional_encoding.py
    deps:
    - path: src/features/tokenizer_transformer.py
      md5: 00392d8d4132048c0a00be6bd7355d60
      size: 3419
    params:
      params.yaml:
        positional_encoding.d_model: 512
        positional_encoding.input_vocab_size: 7765
        positional_encoding.target_vocab_size: 7010
    outs:
    - path: en_emb
      md5: 625fc21093be83d83cc1c21d82c409a6
      size: 2934
    - path: pt_emb
      md5: a401cf0ab1726701b439e4ba705cac2a
      size: 2910
  load:
    cmd: python src/data/load_dataset.py data/
    params:
      params.yaml:
        load.model_name: ted_hrlr_translate/ru_to_en
  train_transformer:
    cmd: python src/models/train_transformer.py
    deps:
    - path: src/features/positional_encoding.py
      md5: 1c672fa22c9f8ae0f07f00cee48f49bb
      size: 2507
    params:
      params.yaml:
        train_transformer.EPOCHS: 2
        train_transformer.d_model: 128
        train_transformer.dff: 512
        train_transformer.dropout_rate: 0.1
        train_transformer.num_attention_heads: 8
        train_transformer.num_layers: 4
    outs:
    - path: dvclive.json
      md5: ebdee26e80f6eac723d91a4a95ceed83
      size: 119
    - path: dvclive/scalars
      md5: 128f6a40de187339ded7f3793aefbf1d.dir
      size: 509165
      nfiles: 2
